(this.webpackJsonpmarcoman=this.webpackJsonpmarcoman||[]).push([[0],{43:function(e,t,a){e.exports=a(88)},48:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(11),i=a.n(l),r=(a(48),a(37)),c=a(42),m=a(18),o=a(19),d=a(24),u=a(20),h=a(3),v=a(25),p=a(14);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var E=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={name:e.name||"",cals:e.cals||"",protein:e.protein||"0",fat:e.fat||"0",carbs:e.carbs||"0",servings:e.servings||"1",totalservings:e.totalservings||"1"},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){console.log("huh",e.editing,this.props.editing),e.editing!==this.props.editing&&this.setState({name:this.props.item.name,cals:this.props.item.cals,protein:this.props.item.protein,fat:this.props.item.fat,carbs:this.props.item.carbs,servings:this.props.item.servings,totalservings:this.props.item.totalservings})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{id:"name",className:"input is-small",type:"text",placeholder:"Name",ref:function(t){e.nameInput=t},onChange:this.handleChange,value:this.state.name}))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{id:"cals",className:"input is-small",type:"text",placeholder:"Cals",onChange:this.handleChange,value:this.state.cals}))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{id:"protein",className:"input is-small",type:"text",placeholder:"Protein",onChange:this.handleChange,value:this.state.protein}))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{id:"fat",className:"input is-small",type:"text",placeholder:"Fat",onChange:this.handleChange,value:this.state.fat}))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{id:"carbs",className:"input is-small",type:"text",placeholder:"Carbs",onChange:this.handleChange,value:this.state.carbs}))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{id:"servings",className:"input is-small",type:"text",placeholder:"Servings",onChange:this.handleChange,value:this.state.servings}))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{id:"totalservings",className:"input is-small",type:"text",placeholder:"Total servings",onChange:this.handleChange,value:this.state.totalservings}))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button is-primary"},"Add item"))))))))}},{key:"handleChange",value:function(e){var t={};t[e.target.id]=e.target.value,this.setState(t)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={name:this.state.name,cals:this.state.cals,protein:this.state.protein,fat:this.state.fat,carbs:this.state.carbs,servings:this.state.servings,totalservings:this.state.totalservings,visible:!0};this.props.handleSubmit(t),this.setState((function(e){return{name:"",cals:"",protein:"0",fat:"0",carbs:"0",servings:"1",totalservings:"1"}})),this.nameInput.focus()}}]),t}(s.a.Component),b=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({background:e?"lightgreen":""},t)},f=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={items:[],editing:-1},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleEditSubmit=a.handleEditSubmit.bind(Object(h.a)(a)),a.onDragEnd=a.onDragEnd.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(o.a)(t,[{key:"onDragEnd",value:function(e){if(e.destination){var t=function(e,t,a){var n=Array.from(e),s=n.splice(t,1),l=Object(c.a)(s,1)[0];return n.splice(a,0,l),n}(this.state.items,e.source.index,e.destination.index);this.setState({items:t})}}},{key:"startEdit",value:function(e,t){this.setState({editing:e})}},{key:"exportJson",value:function(e){if(0!==this.state.items.length){this.state.items[0].meal_servings=this.state.servings;var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.state.items)),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download",this.state.exporttitle+".json"),document.body.appendChild(a),a.click()}}},{key:"onReaderLoad",value:function(e){console.log(e.target.result);var t=JSON.parse(e.target.result);console.log(t),this.setState({items:t,servings:t[0].meal_servings||1})}},{key:"importJson",value:function(e){var t=new FileReader;t.onload=this.onReaderLoad.bind(this),t.readAsText(e.target.files[0])}},{key:"render",value:function(){var e=this,t=this.state.items.reduce((function(e,t){return t.visible?e+t.protein*t.servings/t.totalservings+t.fat*t.servings/t.totalservings+t.carbs*t.servings/t.totalservings:e}),0),a=this.state.items.reduce((function(e,t){return t.visible?e+t.protein*t.servings/t.totalservings:e}),0),n=this.state.items.reduce((function(e,t){return t.visible?e+t.fat*t.servings/t.totalservings:e}),0),l=this.state.items.reduce((function(e,t){return t.visible?e+t.carbs*t.servings/t.totalservings:e}),0),i=this.state.items.reduce((function(e,t){return t.visible?e+t.cals*t.servings/t.totalservings:e}),0),r=this;return s.a.createElement("div",{className:"container"},s.a.createElement(p.a,{onDragEnd:this.onDragEnd},s.a.createElement("table",{className:"table is-fullwidth is-hoverable"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Cals"),s.a.createElement("th",null,"Protein"),s.a.createElement("th",null,"Fat"),s.a.createElement("th",null,"Carbs"),s.a.createElement("th",null,"Servings"),s.a.createElement("th",null),s.a.createElement("th",null),s.a.createElement("th",null))),s.a.createElement(p.c,{droppableId:"droppable"},(function(t,a){return s.a.createElement("tbody",Object.assign({},t.droppableProps,{ref:t.innerRef,style:(a.isDraggingOver,{})}),e.state.items.map((function(e,t){return s.a.createElement(p.b,{key:"drag"+t,draggableId:"drag"+t,index:t},(function(a,n){return s.a.createElement("tr",Object.assign({className:e.visible?"":"has-text-grey-lighter",ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:b(n.isDragging,a.draggableProps.style)}),s.a.createElement("td",null,e.name),s.a.createElement("td",null,(e.cals*e.servings/e.totalservings).toFixed(2)),s.a.createElement("td",null,(e.protein*e.servings/e.totalservings).toFixed(2)),s.a.createElement("td",null,(e.fat*e.servings/e.totalservings).toFixed(2)),s.a.createElement("td",null,(e.carbs*e.servings/e.totalservings).toFixed(2)),s.a.createElement("td",null,e.servings+"/"+e.totalservings),s.a.createElement("td",null,s.a.createElement("p",{className:"buttons"},s.a.createElement("button",{className:"button is-small",onClick:r.startEdit.bind(r,t)},s.a.createElement("span",{className:"icon is-small has-text-primary"},s.a.createElement("i",{className:"fas fa-pen"}))))),s.a.createElement("td",null,s.a.createElement("p",{className:"buttons"},s.a.createElement("button",{className:"button is-small",onClick:r.toggleVisible.bind(r,t)},s.a.createElement("span",{className:"icon is-small "+(e.visible?"":"has-text-grey-lighter")},s.a.createElement("i",{className:"fas fa-eye"}))))),s.a.createElement("td",null,s.a.createElement("p",{className:"buttons"},s.a.createElement("button",{className:"button is-small",onClick:r.deleteItem.bind(r,t)},s.a.createElement("span",{className:"icon is-small has-text-danger"},s.a.createElement("i",{className:"fas fa-times"}))))))}))})),t.placeholder)})),s.a.createElement("tfoot",null,s.a.createElement("tr",null,s.a.createElement("td",null,"Total"),s.a.createElement("td",null,i.toFixed(2)),s.a.createElement("td",null,a.toFixed(2)+" ("+Math.round(100*a/t)+"%)"),s.a.createElement("td",null,n.toFixed(2)+" ("+Math.round(100*n/t)+"%)"),s.a.createElement("td",null,l.toFixed(2)+" ("+Math.round(100*l/t)+"%)"),s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null))))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement("nav",{className:"level"},s.a.createElement("div",{className:"level-left"},s.a.createElement("div",{className:"level-item"},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{value:this.state.servings,id:"servings",onChange:this.handleChange,className:"input",type:"text",placeholder:"Servings"})))),s.a.createElement("div",{className:"level-item"},s.a.createElement("p",{className:"subtitle is-5"},(i/(this.state.servings||1)).toFixed(2)," per"))))),s.a.createElement("div",{className:"column"},s.a.createElement(E,{handleSubmit:this.handleSubmit})),s.a.createElement("div",{className:"column"})),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{id:"exporttitle",className:"input",type:"text",placeholder:"Title",onChange:this.handleChange,value:this.state.exporttitle})),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button is-info",onClick:this.exportJson.bind(this)},"Export"))),s.a.createElement("div",{className:"file"},s.a.createElement("label",{className:"file-label"},s.a.createElement("input",{className:"file-input",type:"file",name:"list",onChange:this.importJson.bind(this)}),s.a.createElement("span",{className:"file-cta"},s.a.createElement("span",{className:"file-icon"},s.a.createElement("i",{className:"fas fa-upload"})),s.a.createElement("span",{className:"file-label"},"Import")))),s.a.createElement("div",{className:"modal "+(-1!==this.state.editing?"is-active":"")},s.a.createElement("div",{className:"modal-background"}),s.a.createElement("div",{className:"modal-card",style:{width:480}},s.a.createElement("header",{className:"modal-card-head"},s.a.createElement("p",{className:"modal-card-title"},"Edit item"),s.a.createElement("button",{className:"delete","aria-label":"close",onClick:function(){e.setState({editing:-1})}})),s.a.createElement("section",{className:"modal-card-body"},s.a.createElement(E,{handleSubmit:this.handleEditSubmit,editing:this.state.editing,item:-1!==this.state.editing?this.state.items[this.state.editing]:{}})))))}},{key:"handleChange",value:function(e){var t={};t[e.target.id]=e.target.value,this.setState(t)}},{key:"handleSubmit",value:function(e){this.setState((function(t){return{items:t.items.concat(e)}}))}},{key:"handleEditSubmit",value:function(e){var t=this;this.state.items[this.state.editing]=e,this.setState((function(e){return{items:t.state.items,editing:-1}}))}},{key:"toggleVisible",value:function(e,t){var a=this;this.state.items[e].visible=!this.state.items[e].visible,this.setState((function(e){return{items:a.state.items}}))}},{key:"deleteItem",value:function(e,t){var a=this;this.state.items.splice(e,1),this.setState((function(e){return{items:a.state.items}}))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[43,1,2]]]);
//# sourceMappingURL=main.c1f20859.chunk.js.map